## Part 1. Установка ОС
- Версия системы - Ubuntu 20.04.06 LTS без графического интерфейса

![Версия системы](img/image-1.png "Проверка версии системы, демонстрация отсутствия интерфейса")

## Part 2. Создание пользователя

- Создаение пользователя: sudo adduser
- Добавление в группу adm: **sudo usermod -aG "group_name" "user_name"**

![Новый пользователь](img/image-2.png "Новый пользователь")

- Результат команды **cat /etc/passwd**:

![Пользователи](img/image-3.png)

## Part 3. Настройка сети ОС

1. Смена имени командой **sudo hostname user-1**:

![Новое имя машины](img/image-5.png)

- Смена имени в файле **/etc/hosts**: 

![файл /etc/hosts](img/image-4.png)

2. Установка часового пояса Москвы:

![Настройка часового пояса](img/image-6.png)

3. Команда для просмотра всех сетевых интерфейсов: **ip addr**:

![Сетевые интерфейсы](img/image-7.png)

  - Интерфейс lo или по другому loopback - внутренний сетевой интерфейс операционной системы, используемый для обратной связи с самим устройством. Представляет собой локальную петлю и обычно имеет адрес '127.0.0.1'

  - DHCP (Dynamic Host Configuration Protocol) сервер - это сервер, который автоматически назначает IP-адреса и другие сетевые параметры устройствам в компьютерной сети. Для обращения к нему через терминал использовалась команда **ip addr show**. IP адрес устройства - **172.20.10.7**:

![DHCP](img/image-8.png)

4. Для полученеи **внешнего IP** устройства можно использовать команду **wget -qO- eth0.me**. wget это утилита командной строки, используемая для загрузки файлов по сети. В данном случае, eth0.me является веб-сервисом, который возвращает IP-адрес, с которого был выполнен запрос:

![Внешний IP](img/image-9.png)

5. **Внутренний ip-адрес шлюза** можно получить с помощью команды **ip route**. Нас интересует адрес после слова link -  **172.20.10.7**:

![Внутренний IP](img/image-10.png)

6. Чтобы задать статичные (заданные вручную, а не полученные от DHCP сервера) настройки ip, gw, dns нужно отредактировать файл **/etc/network/interfaces**:

![Alt text](img/image-11.png)

  - Нужно задать например следующие значения:

![Alt text](img/image-12.png)

7. Проверка работы сети, ping 1.1.1.1 и ya.ru. 0% packet loss в обоих случаях:

![Ping](img/image-13.png)

## Part 4. Обновление ОС

- Для обновления всех установленных пакетов используется команда **sudo apt ugrade**. Все пакеты были успешно обновлены. 

![Alt text](img/image-14.png)

## Part 5. Использование команды sudo

1. **sudo** - команда для выполнения команд с правами с правами администратора или суперпользователя (root), что позволяет выполнить операцию, требующую повышенных привилегий. Префикс "sudo" позволяет временно получить доступ к командам и файлам, к которым обычный пользователь не имеет достаточных прав.

![Alt text](img/image-15.png)

2. Делаем перезагрузку и входим в учетку пользователя **newuser**, там изменяем имя хоста на user-2:

![Alt text](img/image-16.png)

## Part 6. Установка и настройка службы времени

1. Настройка времени произведена с использованием пакета **chrony**  и редактирования файла **/etc/chrony/chrony.conf** куда был добавлен пул серверов для синхронизации:
  - pool 0.ru.pool.ntp.org iburst
  - pool 1.ru.pool.ntp.org iburst
  - pool 2.ru.pool.ntp.org iburst
  - pool 3.ru.pool.ntp.org iburst
2. Итоговый результат:

![Alt text](img/image-17.png)

## Part 7. Установка и использование текстовых редакторов

1. Создание и сохранение файлов:
  - **VIM** : vim test_vim.txt. Выйти и сохранить -  нажать esc, напечатать :wq и нажать enter:

![Alt text](img/image-18.png)

  - **NANO** : nano test_nano.txt. Выйти и сохранить -  нажать control + O (enter), control + X:

![Alt text](img/image-19.png)

  - **JOE** : joe test_joe.txt. Выйти и сохранить -  нажать control + k, q, y:

![Alt text](img/image-20.png)

2. Выход без изменений:

  - **VIM** : vim test_vim.txt. Выйти без сохранений -  нажать esc, напечатать :q! и нажать enter:

![Alt text](img/image-21.png)

  - **NANO** : nano test_nano.txt. Выйти без сохранений -  нажать control + X, n:

![Alt text](img/image-22.png)

  - **JOE** : joe test_joe.txt. Выйти без сохранений -  нажать control + k, q, n:

![Alt text](img/image-23.png)

3. Поиск и замена.

  - **VIM** : vim test_vim.txt. Поиск -  нажать '/' и напечатать слово (регулярку) для поиска, поиск и замена - нажать esc + : + напечатать %s/что заменить/на что заменить

![Alt text](img/image-24.png)
![Alt text](img/image-25.png)

  - **NANO** : nano test_nano.txt. Поиск -  нажать control + W и ввести что нужно искать, поиск и замена - control + \ + что заменить (enter) + на что заменить + Y/N для каждого из вхождений (или A для замены всего сразу):

![Alt text](img/image-26.png)
![Alt text](img/image-27.png)

  - **JOE** : joe test_joe.txt. Поиск - cntrl + K, F + что ищем, замена cntrl + K, F, R что заменяем, на что заменяем:

  ![Alt text](img/image-29.png)
  ![Alt text](img/image-28.png)
  ![Alt text](img/image-30.png)

## Part 8. Установка и базовая настройка сервиса SSHD

1. Установленная служба SSHd:

![Alt text](img/image-32.png)

2. Добавление службы в автостарт делается с помощью команды **sudo systemctl enable ssh**

3. Перенастройка службы SSHd на порт 2022 через редактирование файла /etc/ssh/sshd_config:

![Alt text](img/image-33.png)

4. Процесс ssh через команду **ps -ef | grep sshd**, где:
  - ключ -e отображает все процессы, включая процессы других пользователей.
  - Ключ -f выводит полный формат вывода, включая подробную информацию о каждом процессе.
  - Символ | используется для перенаправления вывода команды ps -ef во вход команды grep.
  - grep sshd фильтрует вывод команды ps -ef, отображая только строки, содержащие "sshd".

![Alt text](img/image-34.png)

5. Перезагрузка - **sudo reboot**

6. Команда **netstat -tan**. Значения ключей:
  - t: Отображает только TCP-соединения.
  - a: Показывает все соединения, включая слушающие и активные соединения.
  - n: Отображает порты и IP-адреса в числовом формате вместо попытки выполнения обратного DNS-разрешения (вместо отображения доменного имени).

![Alt text](img/image-36.png)

## Part 9. Установка и использование утилит top, htop

1. Установка -  **sudo apt install top/htop**

2. Команда **top**:

![Alt text](img/image-37.png)

  - uptime: ![Alt text](img/image-38.png)
  - количество авторизованных пользователей: ![Alt text](img/image-39.png)
  - общая загрузка системы: ![Alt text](img/image-40.png) Oбщая загрузка системы представлена тремя значениями, соответствующими последней минуте, последним 5 минутам и последним 15 минутам.
  - общее количество процессов: ![Alt text](img/image-41.png)
  - загрузка cpu: ![Alt text](img/image-42.png) 
    - us (user): Процент времени CPU, затраченного на выполнение пользовательского кода (приложений).
    - sy (system): Процент времени CPU, затраченного на выполнение системного кода ядра операционной системы.
    - ni (nice): Процент времени CPU, затраченного на выполнение приоритетных процессов с измененным приоритетом.
    - id (idle): Процент времени, в течение которого CPU был бездействующим и не использовался.
    - wa (IO wait): Процент времени CPU, ожидающего завершения операций ввода-вывода (IO).
    - hi (hardware interrupt): Процент времени CPU, затраченного на обработку аппаратных прерываний.
    - si (software interrupt): Процент времени CPU, затраченного на обработку программных прерываний.
    - st (steal time): Процент времени, в течение которого виртуальная машина (если таковая имеется) была лишена доступа к физическому процессору.
    - загрузка памяти: ![Alt text](img/image-43.png)
  - pid процесса занимающего больше всего памяти: ![Alt text](img/image-44.png)
  - pid процесса, занимающего больше всего процессорного времени: ![Alt text](img/image-46.png)

3. Команда **htop**:
  - htop отсортированная по PID:

  ![Alt text](img/image-47.png)

  - htop отсортированная по PERCENT_CPU:

  ![Alt text](img/image-48.png)

  - htop отсортированная по PERCENT_MEM:

  ![Alt text](img/image-49.png)

  - htop отсортированная по TIME:

  ![Alt text](img/image-50.png)

  - отфильтрованному для процесса sshd:

  ![Alt text](img/image-51.png)

  - с процессом syslog, найденным, используя поиск:

  ![Alt text](img/image-52.png)

  - с добавленным выводом hostname, clock и uptime

  ![Alt text](img/image-53.png)

## Part 10. Использование утилиты fdisk

1. Список всех дисков с помощью команды **fdisk -l /dev/sda**. Для просмотра информации о номере диска, его размере и количестве секторов - **fdisk -l /dev/sda[номер диска]**:

![Alt text](img/image-54.png)

2. Для просмотра размера swap можно использовать команду **swapon --show** или **free -h**:

![Alt text](img/image-55.png)

## Part 11. Использование утилиты df

1. Утилита **df /root**, для отображения единиц измерения можно использовать флаг -h, с использованием которого можно сделать вывод что единицы по умолчанию - Байты:

![Alt text](img/image-56.png)

2. **df -Th /root**:

![Alt text](img/image-57.png)

## Part 12. Использование утилиты du

1. Для просмотра размера папки **home** в человекочитаемом виде используется команда **sudo du -sh /home/**, ключи sh скрывают лишний вывод и добавляют единицы измерения:

![Alt text](img/image-58.png)

2. Для просмотра размера папки **var** в человекочитаемом виде используется команда **sudo du -sh /var/**, ключи sh скрывают лишний вывод и добавляют единицы измерения:

![Alt text](img/image-59.png)

3. Для просмотра размера папки **var/log** в человекочитаемом виде используется команда **sudo du -sh /var/log/**, ключи sh скрывают лишний вывод и добавляют единицы измерения:

![Alt text](img/image-60.png)

4. Для просмотра размера всего содержимого папки **var/log** в человекочитаемом виде используется команда **sudo du -ha /var/log/* | less**, ключи ah показывают скрытые файлы и добавляют единицы измерения, | перенаправляет вывод в less:

![Alt text](img/image-61.png)
![Alt text](img/image-62.png)

## Part 13. Установка и использование утилиты ncdu

1. Установка ncdu - **sudo apt install ncdu**

2. **ncdu /home**:

![Alt text](img/image-63.png)

3. **ncdu /var**:

![Alt text](img/image-64.png)

4. **ncdu /var/log**:

![Alt text](img/image-65.png)

5. Вывод размеров папок соответствует тому что были получены с помощью утилиты **du** в **Part 12**

## Part 14. Работа с системными журналами


1. /var/log/dmesg:
  - Файл dmesg содержит вывод ядра Linux, который содержит информацию о загрузке системы, обнаруженном оборудовании, драйверах и других событиях, связанных с ядром операционной системы. Обычно, этот файл содержит сообщения, сгенерированные во время загрузки системы и инициализации аппаратных компонентов.
![Alt text](img/image-66.png)
2. /var/log/syslog:
  - Файл syslog содержит системные сообщения, которые были сгенерированы различными компонентами операционной системы. Это включает сообщения о сети, ядре, процессах, службах и других событиях, происходящих на системе. Файл syslog обычно является центральным журналом системы, где собираются различные системные сообщения.
![Alt text](img/image-67.png)
3. /var/log/auth.log:
  - Файл auth.log содержит информацию об аутентификации и авторизации на системе. В него записываются сообщения, связанные с попытками входа в систему, аутентификацией пользователей, изменениями паролей, использованием привилегий и другими событиями, связанными с безопасностью и доступом к системе. Этот файл полезен для отслеживания попыток несанкционированного доступа или мониторинга активности пользователей на системе.
![Alt text](img/image-68.png)

4. Время последней успешной авторизации, имя пользователя и метод входа в систему -  с помощью команды **grep "session opened" /var/log/auth.log | tail -n 1**:

![Alt text](img/image-69.png)

5. Перезапустить службу SSHd - **sudo service ssh restart**

6. Логи перезапуска sshd **sudo journalctl -u ssh.service**

![Alt text](img/image-70.png)

## Part 15. Использование планировщика заданий CRON

1. Для добавления задачи utpime каждые две минуты - **crontab -e**

![Alt text](img/image-71.png)

2. Отобразить текущие задачи:

![Alt text](img/image-72.png)

3. Просмотр выполнения в логах cat /var/log/syslog

![Alt text](img/image-75.png)

4. Удалить все записи **crontab -r**:

![Alt text](img/image-76.png)





